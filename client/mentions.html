<!--
@Author: John Isaacs <john>
@Date:   13-May-172017
@Filename: hashtags.html
@Last modified by:   john
@Last modified time: 21-May-172017
-->
<!DOCTYPE html>
<html>

<head>
    <title>Leaders Debates tracker</title>
    <meta charset="UTF-8">
    <script src='./js/jquery.min.js'></script>
    <script src='./js/d3.min.js'></script>
    <script src='./js/metricsgraphics.min.js'></script>
    <link href='./css/metricsgraphics.css' rel='stylesheet' type='text/css'>
    <link href='./css/leaders.css' rel='stylesheet' type='text/css'>
    <link href='./css/common.css' rel='stylesheet' type='text/css'>
    <script src='./js/mg_line_brushing.js'></script>
    <link rel='stylesheet' href='./css/mg_line_brushing.css' />
    <style>
        #tags {
            width: 90%;
            margins: auto;
        }
    </style>
    <script>

        function generateGraph(){
            d3.json('http://188.166.165.168/mentiondata', function(data) {

              var markers = [{
                'minute': 10,
                'label': 'Sturgeon - \n SNP strengthen \n scotland & single market'
              }, {
                'minute': 17,
                'label': 'Dugdale  -\n labour only \n party to \n take on torys'
              }, {
                'minute': 19,
                'label': 'Public Question \n about brexit'
              }, {
                'minute': 28,
                'label': 'Discussion around \n 2nd Referendum'
              }, {
                'minute': 31,
                'label': 'Davidson - \n Sturgeon promised \n it wuld be once'
              }, {
                'minute': 35,
                'label': 'Nurse \n 1st apperance'
              }
              , {
                'minute': 46,
                'label': 'Education questions'
              }
              , {
                'minute': 49,
                'label': 'Sturgeon - \n education response'
              }
              , {
                'minute': 52,
                'label': 'Davidson - \n education'
              }
              , {
                'minute': 53,
                'label': 'PQ - \n primary pupils failing'
              }, {
                'minute': 54,
                'label': 'PQ - \n Tuition fees '
              }, {
                'minute': 55,
                'label': 'PQ - \n Maintenance grants?'
              }, {
                'minute': 56,
                'label': 'Harvie - \n response to \n fees and education'
              }, {
                'minute': 68,
                'label': 'Nurse (again) \n and public \n sector payment'
              }, {
                'minute': 77,
                'label': 'debate finishes'
              }];
                //modify away!
                //console.log(data);
                MG.data_graphic({
                    title: "Mentions under #" + data.trackingtag,
                    description: "test",
                    data: data.data,
                    legend: data.labels,
                    width: 800,
                    height: 700,
                    target: "#mentions",
                    x_accessor: "minute",
                    y_accessor: "value",
                    markers:markers,
                    y_extended_ticks: true,
                    aggregate_rollover: true,
                    full_width: true,
                    legend_target: '#legend'
                });


            });

        }
        generateGraph();
        setInterval(function(){generateGraph()}, 60000)
    </script>
</head>

<body>
  <nav id="menu">
      <ul>
          <li><a href="/mentions"> Leader Mentions </a></li>
          <li><a href="/hashtags"> Debate hashtags </a> </li>
          <li><a href="/mentionsstacked"> Leader Mentions (stacking) </a> </li>
          <li><a href="/hashtagsstacked"> Debate Hashtags (stacking) </a> </li>
      </ul>
  </nav>
    <div id="mentions">


    </div>
    <div id="legend">
</body>

</html>
